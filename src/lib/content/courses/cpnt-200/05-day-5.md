---
title: Supabase - Row Level Security
excerpt:
status: announced
---

<script>
	import Homework from "$lib/components/Homework.svelte";
	import LessonPlan from "$lib/components/LessonPlan.svelte";
	import Achievement from "$lib/components/Achievement.svelte";
</script>

<Homework {status}>

### Watch list

</Homework>

<LessonPlan {status}>

---

<h2>Authentication vs Authorization</h2>

[![Slides - Authentication vs Authorization](/images/slides/authentication-vs-authorization.png)](https://sait-wbdv.github.io/slides/w23/cpnt-200/authentication-authorization.html)

### Materials

- [Part One: JWTs](https://supabase.com/docs/learn/auth-deep-dive/auth-deep-dive-jwts)
- [Part Two: Row Level Security](https://supabase.com/docs/learn/auth-deep-dive/auth-row-level-security)
- [Part Three: Policies](https://supabase.com/docs/learn/auth-deep-dive/auth-policies)

### Key Takaways

- In _Supabase_: - Authentication happens first with the `<anon>` `apiKey` token. - Authorization happens second with the `Authorization` Bearer token.
- Even if RLS is _Disabled_, users still need an `<anon>` API key to read or make changes to a database table.

### Enable Row Level Security

- The last thing we will do today is enable RLS policies for our tables.
- Find this in the **Authentication** Tab, in Policies, you can add RLS policies
- Once you do, you won't be able to fetch anymore
- However if you add a new policy for read access to anyone, you'll be again able to retrief data, but it'll only be readable (before you could also push data)

#### Activity

- Enable RLS and Read for everyone policies to the movie rental tables (even just 1 or 2 will do for practice)
- Then recreate 2 of the queries from day 2 in postman

---

<h2>Extra Details on RLS Policies</h2>

<dl>
	<dt>RLS</dt>
	<dd>Row-level Security is PostgreSQL's (the database engine used by Supabase) method of auth for each row of a database table.</dd>
	<dt>Access Policies</dt>
	<dd>PostgreSQL's method of allowing access to each row in a database table.</dd>
</dl>

### Key Takeaways

- If RLS is disabled on a table, anyone can read/write/edit records in the table.
- Once RLS is enabled on a table, _no one_ can read/write/edit records in a table.
- A Policy is required on RLS-enabled tables before anyone can read/write/edit records in a table.

It this course we will _enable_ RLS and set Policies so that anyone with an `<anon>` token can read a table but no one can write or edit a table unless they are using the admin panel.

</LessonPlan>

<Achievement {status}>

</Achievement>
