---
title: Supabase User Auth + Site Integration
excerpt:
status: announced
---

<script>
	import Homework from "$lib/components/Homework.svelte";
	import LessonPlan from "$lib/components/LessonPlan.svelte";
	import Achievement from "$lib/components/Achievement.svelte";
</script>

<Homework {status}>

<h2>Prep</h2>

### Reading list

- Supabase Documentation: - [Tables and Data](https://supabase.com/docs/guides/database/tables)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)
- Reference: [Javascript Client Library](https://supabase.com/docs/reference/javascript/introduction)

### Watch list

**Supabase Auth Deep Dive**

- [Part One: JWTs](https://supabase.com/docs/learn/auth-deep-dive/auth-deep-dive-jwts)
- [Part Two: Row Level Security](https://supabase.com/docs/learn/auth-deep-dive/auth-row-level-security)
- [Part Three: Policies](https://supabase.com/docs/learn/auth-deep-dive/auth-policies)

</Homework>

<LessonPlan {status}>

<h2> Morning Javascript Review: Destructuring Assignment</h2>

- Destructuring is when you see things like:

```
const { a, b, ...rest } = objectWithPropertiesAnB;
const [firstVal, secondVal] = arrayOfAtLeastTwoItems;

```

- note the use of the spread operator, this will aggregate all the rest of the values not specified

### Materials

- Video: [Web Dev Simplified](https://www.youtube.com/watch?v=NIq3qLaHCIs)
- MDN: [Destructuring assignment](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)

### Activity: Practice Destructuring

- Using the tables and json we made yesterday, create 2 or more arrays and 2 or more objects
- experiment with the following:

  1. extract variables from an array: Destructuring arrays `[a,b] = arrWithAB`
  2. destructure output from function
     - ```
       function sumAndMultiply(a,b) {
         return [a+b, a*b]
       }
       ```

  ````
  - then assign those functions with destructuring
  3. Using your objects, assign values with destructuring: `{firstName, lastName, ...rest} = userOne;`
  4. Combine two objects with destructuring
  5. Destructure the return of a function
  6. Destructure function arguments
    - ```
    function returnInfo({name, age}) {
      console.log(`${name} is ${age} years old)
    };
    // then call the function
    returnInfo(personOne)

     ```
  ````

---

<h2>Fetching Data into Nuxt</h2>

- [Use the Nuxt Supabase Module]()
- This follows the same patterns learned for Nuxt API routes

### Activity (pair code): Render movie list

- Connect a nuxt install to your movie database using the Nuxt module instructions
  - use a .env file for api keys and endpoints
- query a list of 10 movies from to a Nuxt API route
- pass the data to your app.vue file and render it with a v-for list

---

<h2>Create Users</h2>

- [How to set up user signup in nuxt](https://gist.github.com/ashx3s/9a728058cbb2e851a77f32af6ae52d9f)

### Activity (pair code): User signup support

- first, set a policy on your film table that only authenticated users can read the data

### How signup and authentication works

---

<h2>User Logout</h2>

- [How to set up user logout](https://gist.github.com/ashx3s/7cf9cc0a148ae578d00e1d36248df8c1)

### Activity (pair code): create a logout button

### Verify user logout

</LessonPlan>

<h2>Lab Activity: Sign in Button</h2>

- In your pairs, create a button that makes it so a user can sign back in
- Submit a link to your repo to the dailies

<Achievement {status}>

</Achievement>
